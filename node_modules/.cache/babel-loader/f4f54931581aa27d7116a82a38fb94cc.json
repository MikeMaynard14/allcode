{"ast":null,"code":"var _jsxFileName = \"/Users/mikemaynard/Desktop/Open Window/DevEnv/lecturefiveprep/src/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport PostItem from './components/PostItem';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [userId, setUserId] = useState({\n    activeUser: sessionStorage.getItem('activeUser')\n  });\n  const [posts, setPosts] = useState();\n  const [postMessage, setPostMessage] = useState({\n    message: '',\n    user: sessionStorage.getItem('activeUser')\n  });\n  const [renderPost, setRenderPost] = useState();\n  useEffect(() => {\n    const userSession = sessionStorage.getItem('activeUser');\n    console.log(userSession);\n\n    if (userSession === '' || userSession === undefined) {\n      navigate('/');\n    }\n\n    let userProfile = {\n      activeUser: userSession\n    };\n    axios.post('http://localhost:8888/api/readProfile.php', userProfile).then(res => {\n      let data = res.data;\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  useEffect(() => {\n    axios.post('http://localhost:8888/api/readUserPosts.php', userId).then(res => {\n      let data = res.data;\n      let renderPost = data.map(item => /*#__PURE__*/_jsxDEV(PostItem, {\n        rerender: setRenderPost,\n        uniqueId: item.id,\n        userpost: item.userpost,\n        date: item.timestamp,\n        message: item.message\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 46\n      }, this));\n      console.log(data);\n      setPosts(renderPost);\n      setRenderPost(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [renderPost]);\n\n  const postVal = e => {\n    let messageVal = e.target.value;\n    setPostMessage({ ...postMessage,\n      message: messageVal\n    });\n  };\n\n  const addNewPost = e => {\n    e.preventDefault();\n    document.getElementById('textMes').value = \"\";\n    axios.post('http://localhost:8888/api/addPost.php', postMessage).then(res => {\n      let data = res.data;\n      console.log(data);\n      setRenderPost(true);\n    });\n  };\n\n  const setLogout = () => {\n    sessionStorage.setItem('activeUser', '');\n    navigate('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dash\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Timeline\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      onClick: setLogout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Lets create a library of cringe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashProfile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"posts\",\n      children: posts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add New Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"textMes\",\n          placeholder: \"New Post Message\",\n          onChange: postVal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onClick: addNewPost,\n          children: \"Add Post To Timeline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"UyVEYZcBP7TDAako6TTyd5ACWJw=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","axios","useState","useEffect","PostItem","useNavigate","Dashboard","navigate","userId","setUserId","activeUser","sessionStorage","getItem","posts","setPosts","postMessage","setPostMessage","message","user","renderPost","setRenderPost","userSession","console","log","undefined","userProfile","post","then","res","data","catch","err","map","item","id","userpost","timestamp","postVal","e","messageVal","target","value","addNewPost","preventDefault","document","getElementById","setLogout","setItem"],"sources":["/Users/mikemaynard/Desktop/Open Window/DevEnv/lecturefiveprep/src/Dashboard.js"],"sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { useState, useEffect } from 'react'\nimport PostItem from './components/PostItem'\nimport { useNavigate } from 'react-router-dom'\n\nconst Dashboard = () => {\n\n  const navigate = useNavigate();\n\n    const [userId, setUserId] = useState({\n        activeUser: sessionStorage.getItem('activeUser'),\n    });\n\n    const [posts, setPosts] = useState();\n    const [postMessage, setPostMessage] = useState({\n      message: '', \n      user: sessionStorage.getItem('activeUser'),\n    });\n\n    const [renderPost, setRenderPost] = useState();\n\n    useEffect(()=>{\n      const userSession = sessionStorage.getItem('activeUser');\n      console.log(userSession);\n    if(userSession === '' || userSession === undefined){\n    navigate('/');\n    }\n\n    let userProfile = {activeUser: userSession};\n\n      axios.post('http://localhost:8888/api/readProfile.php', userProfile)\n      .then((res)=>{\n        let data = res.data;\n        console.log(data);\n        \n      })\n      .catch(err=>{\n        console.log(err);\n      });\n\n    \n    }, []);\n\n  \n    useEffect(()=>{\n\n      axios.post('http://localhost:8888/api/readUserPosts.php', userId)\n      .then((res)=>{\n        let data = res.data;\n        let renderPost = data.map((item) =>  <PostItem key={item.id} rerender={setRenderPost} uniqueId={item.id} userpost={item.userpost} date={item.timestamp} message={item.message}  />);\n        console.log(data);\n        setPosts(renderPost);\n        setRenderPost(false);\n        \n      })\n      .catch(err=>{\n        console.log(err);\n      });\n\n   },[renderPost]);\n\n   const postVal = (e) => {\n    let messageVal = e.target.value;\n    setPostMessage({...postMessage, message: messageVal});\n   }\n\n   const addNewPost = (e) => {\n     e.preventDefault();\n     document.getElementById('textMes').value = \"\";\n     axios.post('http://localhost:8888/api/addPost.php', postMessage)\n      .then((res)=>{\n        let data = res.data;\n        console.log(data); \n        setRenderPost(true);\n      });\n   }\n\n   const setLogout = () => {\n      sessionStorage.setItem('activeUser','');\n      navigate('/');\n   }\n\n\n  return (\n    <div className='dash'>\n      <h1>Your Timeline</h1>\n      <p onClick={setLogout}>Logout</p>\n      <p>Lets create a library of cringe</p>\n      <div className='dashProfile'></div>\n      <div className='posts'>\n        {posts}\n      </div>\n      <div className='form'>\n        <form>\n          <p>Add New Post</p>\n            <textarea id='textMes' placeholder='New Post Message' onChange={postVal} />\n            <button type='submit' onClick={addNewPost}>Add Post To Timeline</button>\n        </form>\n      </div>\n   \n    </div>\n  )\n}\n\nexport default Dashboard\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}